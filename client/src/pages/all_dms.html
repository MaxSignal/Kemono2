{% extends 'components/shell.html' %}

{% import 'components/site.html' as site %}
{% from 'components/card_list.html' import card_list %}
{% from 'components/cards/dm.html' import approved_dm_card %}

{% block content %}
{% call site.section("all-dms", title="DMs") %}
  <div class="paginator" id="paginator-top">
    {% include 'components/paginator.html' %}
    <form
      action="/dms"
      method="GET"
      enctype="application/x-www-form-urlencoded"
    >
      <input
        type="text"
        name="q"
        id="q"
        autocomplete="off"
        value="{{ request.args.get('q') if request.args.get('q') }}"
        class="search-input"
        placeholder="search for dms..."
      >
      <input type="submit" style="display: none">
    </form>
  </div>

  <div class="ad-container">
    <script async="async" data-cfasync="false" src="//pl17105978.effectivecpmcontent.com/33d452b8e8512b0e953eb91cbd7fca4f/invoke.js"></script>
    <div id="container-33d452b8e8512b0e953eb91cbd7fca4f"></div>
  </div>
  
  {% call card_list("phone") %}
    {% for dm in props.dms %}
      {{ approved_dm_card(dm, artist=props.artists[loop.index0]) }}
    {% else %}
      <div class="no-results">
        <h2 class="site-section__subheading">Nobody here but us chickens!</h1>
        <p class="subtitle">
          There are no DMs.
        </p>
      </div>
    {% endfor %}
  {% endcall %}

  <div class="paginator" id="paginator-bottom">
    {% include 'components/paginator.html' %}
  </div>
{% endcall %}
{% endblock %}
